
{% set module_name = 'java' %}
{% set submodule_name = 'adoptopenjdk' %}
{% set grain_files = ['os_family', 'os', 'osfinger'] %}
{% set load_default = True %}

data = namespace(content = {})

{% if load_default %}
	{% import_yaml module_name ~ '/defaults/defaults.yaml' as defaults %}
	{% set data.content = salt['slsutil.merge'](data.content, defaults[submodule_name]|default({})) %}
{% endif %}

{% for grain_file in grain_files %}
	{% set data.content = salt['slsutil.merge'](data.content, {grain_file : True}) %}
	{#% import_yaml 'java/defaults/' ~ grain_file ~ '.yaml' as lookup_dict %#}
	{#% set filtered_data = salt['grains.filter_by'](lookup_dict, grain = grain_file) %#}
	{#% if filtered_data.adoptopenjdk is defined %#}
		{#% set adoptopenjdk = salt['slsutil.merge'](adoptopenjdk, filtered_data.adoptopenjdk) %#}
	{#% endif %#}
{% endfor %}

{% set data.content = salt['slsutil.merge'](data.content, salt['pillar.get']('java:adoptopenjdk', default = {})) %}

{% set adoptopenjdk = data.content %}
